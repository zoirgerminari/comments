<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Comments - NO EMAIL FINAL</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
</head>
<body>
    <h1>üí¨ Comments System (NO EMAIL VERSION)</h1>
    <p>Final version without email field</p>

    <h2>Add Comment</h2>
    <form id="form">
        <div>
            <label><strong>Name:</strong></label><br>
            <input type="text" id="name" required style="width:300px; padding:5px;">
        </div>
        <br>
        <div>
            <label><strong>Comment:</strong></label><br>
            <textarea id="comment" required style="width:300px; height:100px; padding:5px;"></textarea>
        </div>
        <br>
        <button type="submit" style="padding:10px 20px; background:blue; color:white; border:none;">Save Comment</button>
    </form>

    <h2>Comments from GitHub Database</h2>
    <div id="comments" style="margin-top:20px;">Loading...</div>

    <script>
        console.log('üî• NO EMAIL VERSION LOADED - ' + new Date());
        
        document.getElementById('form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value.trim();
            const comment = document.getElementById('comment').value.trim();
            
            if (!name || !comment) {
                alert('Please fill both Name and Comment fields');
                return;
            }
            
            if (name.length < 2) {
                alert('Name must be at least 2 characters');
                return;
            }
            
            if (comment.length < 10) {
                alert('Comment must be at least 10 characters');
                return;
            }
            
            alert('‚úÖ Comment would be saved:\\nName: ' + name + '\\nComment: ' + comment);
            this.reset();
        });

        // Load comments from GitHub JSON database
        const loadComments = () => {
            const url = 'https://raw.githubusercontent.com/zoirgerminari/comments/gh-pages/comments-db.json?t=' + Date.now();
            console.log('üì° Loading from:', url);
            
            fetch(url)
                .then(response => {
                    if (!response.ok) throw new Error('Failed to load');
                    return response.json();
                })
                .then(data => {
                    console.log('‚úÖ Loaded data:', data);
                    
                    if (data.comments && data.comments.length > 0) {
                        const html = data.comments.map(c => 
                            `<div style="border:2px solid #333; margin:15px 0; padding:15px; background:#f5f5f5;">
                                <div style="font-weight:bold; color:blue;">üë§ ${escapeHtml(c.name)}</div>
                                <div style="margin:10px 0; line-height:1.4;">${escapeHtml(c.comment)}</div>
                                <div style="font-size:12px; color:#666;">üìÖ ${c.date}</div>
                                <div style="font-size:10px; color:#999;">ID: ${c.id} | Source: ${c.source}</div>
                            </div>`
                        ).join('');
                        document.getElementById('comments').innerHTML = html;
                    } else {
                        document.getElementById('comments').innerHTML = '<div style="padding:20px; text-align:center; color:#666;">No comments found</div>';
                    }
                })
                .catch(error => {
                    console.error('‚ùå Error loading comments:', error);
                    document.getElementById('comments').innerHTML = '<div style="padding:20px; color:red;">Error loading comments: ' + error.message + '</div>';
                });
        };

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Load comments on page load
        loadComments();
        
        // Add timestamp to show when page loaded
        document.body.insertAdjacentHTML('beforeend', 
            '<div style="position:fixed; bottom:10px; right:10px; background:black; color:white; padding:5px; font-size:11px;">Loaded: ' + new Date().toLocaleTimeString() + '</div>'
        );
    </script>
</body>
</html>